<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title></title>
    <meta charset="utf-8" />
    <style type="text/css">
	    body { margin: 0; padding: 0; }
        .wrap { width: 366px; margin: 0 auto; }
        .wrap div { float: left; width: 100px; height: 80px; margin: 10px; border: 1px solid #ccc; cursor: pointer; background-clip: padding-box; }
        .wrap .active { border: 1px dashed #000; }
    </style>
    <script src="../js/move2.js"></script>
	<script>
        /*
            1. 布局转换
            2. 简单拖拽
            3. 碰撞检测
            4. 找到距离最近的碰撞对象
            5. 位置互换索引互换
        */
        window.onload = function () {
            
            var oWrap = document.querySelector('.wrap');
            var aDiv = oWrap.getElementsByTagName('div');
            var aPos = [];
            var i = 0;
            var len = aDiv.length;
            var minIndex = 2;

            // 布局转换
            for (i = 0; i < len; i++) {
                //利用数组存储初始位置信息
                aPos[i] = { left: aDiv[i].offsetLeft, top: aDiv[i].offsetTop };
            }
            for (i = 0; i < len; i++) {
                //开始转换
                aDiv[i].style.left = aPos[i].left + 'px';
                aDiv[i].style.top = aPos[i].top + 'px';

                aDiv[i].style.backgroundColor = getRandomColor();
                aDiv[i].style.position = 'absolute';
                aDiv[i].style.margin = '0';

                aDiv[i].index = i;
                setDrag(aDiv[i]);
            }
        };
	</script>
</head>
<body>
	<div class="wrap">
		<div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
	</div>
</body>
</html>
